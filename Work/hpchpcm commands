 hpchpcm /thai_notes


# hpcm list of console:
  /var/log/console

# console into a node
  console [hostname]

# For HPCM all package/application is installed from the repo diretory or enviornment module
# installing packages is a bad idea (via yum/apt-get) because it’s a tmpfs image (once it reboots the image is returned to a pristine state)
# list of all RPM package
# change directory and pick the node arch
  cd /opt/clmgr/repos/distro/
    cd rhel7.6-aarch64     or     cd rhel7.6-x86_64
  cd /Packages
  
# installing conrep hp scripting tool
  cinstallman --yum-node --node cronusn003 --repo-group rhel76-x86_64-mel-4.5 install hp-scripting-tools

# reboot
  ipmiwrapper [hostname] power reset
 
# show all OS images 
  cinstallman --show-images
  
# assigning an image and kernel to a node
  cinstallman --assign-image --image rhel7.6-mlnx-4.5-1-nv-410.79-hpc --kernel 3.10.0.-957.el7.x86_64 --node zeusn042
# on the next boot install assigned image
  cinstallman --next-boot image --node zeusn042

# install repo package
# for the package name drop the .rpm
  cinstallman --yum-node --node [hostname] --repo-group [repo name] install [package_name]

# show node and image
  cinstallman --show-nodes | grep [keyword] 
  
# cloning and image to modify  
  cinstallman --create-image --clone --source [image] --image [name_of_clone]

# add the extra kernel params
  cadmin --set-kernel-extra-params --image [imagename] "cgroup_disable=memory intel_pstate=disable"

# show kernel params
  cadmin --show-kernel-extra-params --image [imagename]

# 
  chroot [image]
  rpm -qa | grep [keyword]

#  show repo of the group
  crepo --show-groups

#################################### Adding node to sales op ###################################
# set sales op per node
	qmgr –c “set node [node] resources_available.sales_op = [sales op name]”
# list sales op
	pbsnodes -av | egrep "^c|^l|^a|^r|^z|^h|sales_op" | more
#################################### End ###################################
