#script in ~sfleisch
yum install -y http://mirror.centos.org/centos/7/extras/x86_64/Packages/container-selinux-2.68-1.el7.noarch.rpm 
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
yum install -y docker-ce-18.09.0-3.el7.x86_64 
#You need to install the repo def into /etc/yum.repo.d.
########################################
#controlling docker daemon
 systemctl start|restart|status docker.service (docker daemon)
#information for nvidia docker
 which nvidia-docker
 nvidia-docker  --version
 docker info
 nvidia-docker verison (more detail)
#list of repository
 docker images 
#install docker
 sudo yum -y install docker-engine
#install nvidia docker
 yum list installed nvidia-docker
#install nvidia container 
 yum list installed nvidia-container-runtime

 docker load -i tf18.08.tar
 docker tag [image id] [repositoy name]:[tag]


#If docker daemon does not start and in a failed state check metadata file at : /var/lib/docker/devicemapper/devicemapper/metadata
#If the file has symbols delete docker directory : /var/lib/docker
 rm -rf /var/lib/docker
 systemctl restart docker.service
 
#if deleting the docker dir did not start docker
cd /etc/docker/
vi daemon.json
#delete the file and input only: {}
 
 #if docker was started too often force to start:
 systemctl reset-failed docker.service
 systemctl start docker.service
 
#script location
/admin/nodes/scripts/admindocker start 

#other commands
 systemctl stop docker.service

docker pull nvcr.io/nvidia/tensorflow-18.09-py3
docker images
nvidia-docker run -ti --rm nvcr.io/nvidia/tensorflow-18.09-py3 /bin/bash
#ti terminal interactive rm remove the container instaint
exit
